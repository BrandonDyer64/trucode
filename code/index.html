<html>
<head>
	<link rel="stylesheet" type="text/css" href="../main_style.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script src="cm/lib/codemirror.js"></script>
	<link rel="stylesheet" href="cm/lib/codemirror.css">
	<link rel="stylesheet" href="cm/theme/base16-dark.css">
	<script src="cm/mode/javascript/javascript.js"></script>
	<script src="../vars.js" type="text/javascript"></script>
	<script src="data.js" type="text/javascript"></script>
	<script src="filer.js" type="text/javascript"></script>
	<title>Code</title>
</head>
<body oncontextmenu="return false" class="no_selection">
	<div style="display:flex;">
		<div style="width:640;margin-right:20px;">
			<div>
				<div class="runbutts" style="width:640;background-color:#111;margin:10px;">
					<div class="dropdown">
						<button id="home" onclick="window.location.href='../'">Home</button>
						<button id="button_file" onclick="file()" class="dropbtn">File</button>
						<div id="fileDropdown" class="dropdown-content">
							<a onclick="saveCode()">Save</a>
							<a id="project_page" href="#">Project Page</a>
							<script type="text/javascript">
							var projectPage = document.getElementById('project_page');
							if (QUERY_STRING.proj != undefined) {
								project_page.href = "project.html?proj=" + QUERY_STRING.proj;
							} else {
								projectPage.style.display = "none";
							}
							</script>
							<a href="#">Delete Project</a>
						</div>
					</div>
					<script type="text/javascript">
					/* When the user clicks on the button, 
					toggle between hiding and showing the dropdown content */
					function file() {
						document.getElementById("fileDropdown").classList.toggle("show");
					}
					// Close the dropdown menu if the user clicks outside of it
					window.onclick = function(event) {
						if (!event.target.matches('.dropbtn')) {

							var dropdowns = document.getElementsByClassName("dropdown-content");
							var i;
							for (i = 0; i < dropdowns.length; i++) {
								var openDropdown = dropdowns[i];
								if (openDropdown.classList.contains('show')) {
									openDropdown.classList.remove('show');
								}
							}
						}
					}
					</script>
					<button onclick="runcode();">Run</button>
					<button id="buttonPause" onclick="pausecode();">Pause</button>
					<button id="buttonStep" onclick="draw();">Step</button>
					<button id="buttonStep" onclick="window.location.href='?tut=' + (Number(QUERY_STRING.tut) + 1);">Next Tutorial</button>
					<input id="project_title" type="text" name="title" value="Untitled Project" placeholder="Title" style="float: right;"></input>
					<script>
					if (QUERY_STRING.proj != undefined) {
						var title = QUERY_STRING.proj.split('@')[1];
						document.getElementById('project_title').value = title;
					}
					</script>
				</div>
				<canvas id="canvas" width="640" height="400" class="shade" style="background-color:#000;margin-left:10px;border-radius:10px;"></canvas>
			</div>
			<textarea id="console" readonly style="width:640;height:100;background-color:#111;color:white;margin:10px;border-radius:10px;border:none;">Hello from your Console!</textarea>
			<script type="text/javascript" src="../engine.js"></script>
		</div>
		<div style="flex:1;margin:10px;">
			<textarea id="ceditor" style="background-color:#111;color:white;margin:20px;">
init = function() {
	println('Hello, World!');
}

draw = function() {
	/*TICK*/ {
		
	}
	/*RENDER*/ {
		
	}
}</textarea>
			<script type="text/javascript">
			myTextArea = document.getElementById("ceditor");
			var myCodeMirror = CodeMirror.fromTextArea(myTextArea, {
				value: myTextArea.value,
				theme: "base16-dark",
				lineNumbers: true,
				matchBrackets: true,
				indentWithTabs: true,
				indentUnit: 4
			});
			</script>
			<script>
			if (QUERY_STRING.proj != undefined) {
				$.post(HOST + '/get_project.php',{
					query: QUERY_STRING.proj
				},
				function(data) {
					console.log(data);
					var json = JSON.parse(data);
					myCodeMirror.setValue(json.code);
				});
			}
			</script>
			<div>
			<video id="video" autoplay width="320" height="240" controls style="">
				<source id="video_source" src="tutorials/1.mkv" type="video/webm"></source>
				<script type="text/javascript">
				var videoSource = document.getElementById('video_source');
				if (QUERY_STRING.tut == undefined) {
					var video = document.getElementById('video');
					video.style.display = "none";
				} else {
					var file = document.getElementById('button_file');
					file.style.display = "none";
					var projectTitle = document.getElementById('project_title');
					projectTitle.style.display = "none";
				}
				videoSource.src = 'tutorials/' + QUERY_STRING.tut + '.mkv';
				</script>
				<p>Your browser doesn't like the video tag.<br>
				Might we sudgest 
				<a href="https://www.google.com/chrome/browser/desktop/index.html">
					Google Chrome
				</a>
				?</p>
			</video>
		</div>
		</div>
	</div>
</body>
</html>
<script>
runcode();
draw();
</script>
